<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Rapport IFT2255</title>

    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <img src="images/udem_logo.png" alt="Université de Montréal" style="width: 10rem;">
    <hr>

    <h1>Rapport du projet MaVille</h1>

    <section id="cadre">
    <h2>Mise à jour du projet</h2>


    <div class="placeholder">
        <h4>Cadre</h4>
        <p>
            Ce projet est dans le cadre du Cours IFT2255 - il vise la conception et implémentation des logiciels.
            Il s’agit ici du troisième jalon, qui nous amène à rafiner notre implémentation précédente de l'application MaVille et à y intégrer les concepts de déploiement.
            L’objectif principal est de mettre en pratique les notions vues en cours comme l’analyse des besoins, la modélisation, la conception orientée objet, l'implémentation
            d'une interface graphique, le déploiement de l'application à travers Docker et les techniques de CI/CD grâce aux github actions.
            En plus du développement, nous devons produire un rapport HTML structuré et maintenir notre travail sur GitHub tout au long du processus.
        </p>

        <h4>Contexte</h4>
        <p>
            La Ville de Montréal est régulièrement confrontée à de nombreux travaux publics et privés qui affectent la circulation et la qualité de vie des résidents. 
            Les outils actuellement disponibles pour s’informer sur ces travaux, comme le service Info-Entraves, sont jugés insuffisants par les citoyens, qui se retrouvent souvent mal informés, ce qui génère un sentiment d’imprévisibilité et de frustration.
            Le Service des Travaux Publics de Montréal (STPM) souhaite donc une solution plus efficace pour assurer une meilleure communication entre les citoyens, les prestataires et la Ville. L’application MaVille répond à ce besoin en proposant plusieurs fonctionnalités comme:
        </p>
        <ul>
            <li>Consultation des travaux en cours ou planifiés.</li>
            <li>Réception de notifications ciblées.</li>
            <li>Signalement de problèmes routiers.</li>
            <li>Candidature à des projets de résolution de problèmes par les prestataires.</li>
            <li>Suivi et gestion des signalements et des candidatures par le STPM.</li>
        </ul>
        <p>
            L’application doit aussi intégrer une API ouverte de la Ville pour récupérer les données réelles des chantiers. Elle doit aussi intégrée une persistance des données.
        </p>

        <h4>Repartition du travail</h4>
        <section id="glossaire">
        <dl class="glossaire">
            <dt>Cyreanne</dt>
            <dd>Implémentation client + Tests Unitaires + Architecture et choix de conception</dd>

            <dt>Lallia</dt>
            <dd>Implémentation (client et backend) + Diagramme du domaine métier</dd>

            <dt>Roxanne</dt>
            <dd>Assignation des tâches + Diagramme des CUs + Diagramme de Classe bas niveau + Implémentation client</dd>

            <dt>Zachary</dt>
            <dd>Prototype + Diagramme du processus métier + Diagramme de séquence + Implémentation client</dd>

            <dt>Josué</dt>
            <dd>Setup du projet + Implémentation (client et backend) + Gestion de l'équipe + Docker + Démo</dd>
        </dl>

        <h4>Corrections</h4>
        <p>Les cas d'utilisation, le diagramme de cas d'utilisations, le diagramme d'activité et le diagramme de classes ont été adaptés pour intégrer les nouvelles exigences et les remarques du DM précédent.</p>
    </section>

    </div>
    </section>
    
    <h2>Conception</h2>
    <section id="DiagrammeAct">
        <h3>Diagramme des processus métier mise à jour</h3>
        <div class="placeholder">
            <img src="images/Diagramme_activite.jpg" alt="diagramme d'activités">
        </div>
    </section>

    <section id="DiagrammeClasse">
        <h3>Diagramme du domaine métier corrigé</h3>
        <div class="placeholder" >
            <img src="images/Class_Diagram_MaVille_DM1.jpg" alt="diagramme du domaine métier">
        </div>
        <h3>Diagramme de classes de bas niveau</h3>
        <div class="placeholder" style="overflow: auto; border: 1px solid #ccc; max-width: 100%; max-height: 80vh;">
            <img src="images/DiagrammeClasseDetailleDM3.png" alt="diagramme de classe détaillée" style="width: auto; height: auto; max-width: 3000px; max-height: none;">
        </div>
    </section>

    <section id="DiagrammeSequence">
        <h3>Diagrammes de séquence du Cas d'utilisation Signaler un problème Routier</h3>
        <div class="placeholder" style="overflow: auto; border: 1px solid #ccc; max-width: 100%; max-height: 80vh;">
            <img src="images/Diagramme_sequence-Signaler_probleme_routier.jpg" alt="diagramme de séquence 1" style="width: auto; height: auto; max-width: 3000px; max-height: none;">
        </div>
        <h3>Diagrammes de séquence du Cas d'utilisation Consulter les notifications</h3>
        <div class="placeholder" style="overflow: auto; border: 1px solid #ccc; max-width: 100%; max-height: 80vh;">
            <img src="images/Diagramme_sequence-Signaler_probleme_routier.jpg" alt="diagramme de séquence 2" style="width: auto; height: auto; max-width: 3000px; max-height: none;">
        </div>
    </section>

    <section id="BesoinsFunct">
        <h3>Diagramme de cas d'utilisation mise à jour</h3>
        <div class="placeholder" >
            <img src="images/DiagrammeCasUtilisationDM3.png" alt="diagramme de CU">
        </div>
        <div>
            La description détaillée des cas d'utilisation : <a href="rapport_CU_DM3FINAL.pptx">Description détaillée des cas d'utilisation.</a>
        </div>
    </section>

    <section id="Architecture">
        <h3>Architecture</h3>
        <div class="placeholder">
            <p>
                MaVille suit le style d'architecture en couches pour pouvoir garantir une séparation claire entre les responsabilités et avoir une maintenabilité qui est meilleure <br>
                Elle intègre aussi une architecture REST et une API fourni par la ville.
            </p>
            <ul>
                <li>Couche client qui est l'interface graphique chargée de gérer l'interaction avec l'utilisateur.</li>
                <li>Couche server contenant la logique fonctionnelle.</li>
                <li>Couche d'accés aux données se chargeant de l'initialisation et du stockage des données.</li>
            </ul>

            <h4>Utilisateurs et leurs moyens de communiquer avec l'application</h4>
            <ul>
                <li>
                    <h5>Résident</h5>
                    <li>Consulter les projets de travaux en cours et à venir.</li>
                    <li>Faire des signalements.</li>
                    <li>S'abonner à des quartiers ou à des rues particulières pour recevoir les notifications sur les événements les concernant.</li>
                    <li>Recevoir les notifications pour le traitement de leurs signalements et pour la création et la mise à jour de projets.</li>
                </li>
                <li>
                    <h5>Prestataire</h5>
                    <li>Consulter les fiches problèmes créées par les agents de la STPM.</li>
                    <li>Soumettre des candiatures pour des problèmes.</li>
                    <li>Consulter leurs projets de travaux.</li>
                    <li>Mettre à jour les informations sur le déroulement des travaux.</li>
                    <li>S'abonner à des aurtiers ou à des types de travaux particuliers pour recevoir des notifications pour les nouvelles fiches problèmes entrant dans ces catégories.</li>
                    <li>Recevoir les notifications de traitements de leurs candidatures et de création de fiches problèmes.</li>
                </li>
                <li>
                    <h5>Agent de la STPM</h5>
                    <li>Accepter ou refuser les candidatures.</li>
                    <li>Affecter des priorités aux problèmes signalés.</li>
                    <li>Recevoir les notifications de signalement et de candidature.</li>
                </li>
            </ul>

            <h4>Composants liées au style d'architecture</h4>

            <ul>
                <li>Couche client : affiche les menus, capte les entrées utilisateurs et redirige vers les bons cas d'utilisations.</li>
                <li>Couche métier : traite les cas d'utilisation comme le signalement, les notifications etc...</li>
                <li>Couche d'accès aux données : gère les entités comme les travaux, les projets, les problèmes, les utilisateurs dans la base de données.</li>
            </ul>

            <h4>Composants additionnelles jouant un rôle clé</h4>
            <ul>
                <li>
                    Le composant UseRequest dans le package hooks permet de faciliter la communication entre les controllers du serveur en
                    centralisant la logique de requête HTTP et de réception des réponses.
                </li>
                <li>Le package utils contient des fonctions utilitaires qui sont utiles au travail des controllers et du serveur.</li>
            </ul>

            <h4>Espace de stockage ou base de données</h4>
            <p>L'application stocke :</p>
            <ul>
                <li>Les utilisateurs, les projets, les signalements et les problèmes etc... dans une base de données MongoDB.</li>
            </ul>

            <h4>Services externes ou API</h4>
            <p>L'API de la ville de Montréal est intégrée à l'application. Elle fournit déjà des données sur quelques travaux en cours.</p>

            <img src="images/architecture.png" alt="Architecture">
        </div>
    </section>

    <section id="Choix design">
        <h3>Justification du choix du design</h3>
        <div class="placeholder">
            <p>
                L'architecture choisie, comme dit plus haut, est une architecture en couches qui représente aussi une architecture REST. 
                <br>La logique a été de séparer complètement les tâches dans l'application pour permettre une meilleur cohésion.
                <br>Nous avons trois partie principale dans l'application.
                <br>La première partie est la partie client. Il s'agit tout simplement de l'interface graphique. Elle s'assure de la communication entre les utilisateurs et la partie serveur.
                Elle leur affiche les messages, les formulaires et les informations dont ils ont besoin.
                <br>La deuxième partie est la partie serveur.Il contient la classe Server, la Database et les controllers. Le Server, est un serveur Javalin. C'est lui qui intercepte, traite et redirige les requêtes client vers les controllers.
                En effet, pour chaque entité de l'application, il existe un controller qui est chargé de s'occuper de tout ce qui la concerne. Ce controller communique aussi avec un fichier DAO (Data Access Object) unique qui est chargé d'impacter la base de données.
                Chaque controller communique avec la base de données en impactant uniquement la collections de documents qui le concerne. Cette division de la logique permet de réduire le couplage parce que en cas de bugs et de problème lors d'une procédure, on sait exactement à quel controller s'adresser et ça facilite le debugging.
                <br>La troisième partie est la partie base de données. C'est elle qui s'occupe du stockage et de la persistance des données. Nous avons utilisé une base de données non relationnelle, notamment de type MongoDB. La flexibilité de la structure des documents et le fait qu'ils sont stockés sous forme de
                JSON par défaut facilite leur traitement par les autres parties de l'application.
                <br>Ainsi, grâce à l'architecture en couches, la logique est répartie de manière à permettre une plus forte cohésion tout au long de l'application à travers la répartition des tâches et des processus.
                <br>Et à travers l'architecture REST, on a un moyen plus efficace et plus centralisé de communication, ce qui réduit les relations d'interdépendances entre les classes et qui permet donc un faible couplage. Cela facilite aussi de nouvelles intégrations et des améliorations à l'application.
            </p>
        </div>
    </section>

    <h2>Implémentation</h2>
    <section id="explication_setup">
        <h3>Explication de la configuration du projet</h3>
        <h4>Le client</h4>
        <p>
            L'interface graphique est faite avec React.js et TypeScript. Elle nécessite Node.js ayant une version supérieure ou égale à 22.12.0. TypeScript permet d'asurer une sécurité de l'application niveau typage. Nous avons également intégré Redux-toolkit à l'application. Il permet pendant toute la durée de la session, d'avoir accès au
            informations de l'utilisatuer connecté comme un état global. Il est utilisé pour permttre une sécurité entre les pages et entre les rôles.
        </p>
        <br>
        <h4>Le server</h4>
        <p>
            Il utilise Java 21 et Maven pour sa configuration. Il s'agit d'un serveur Javalin. Il gère principalement la logique à travers les controllers. Ceux si communiquent avec la base de données en utilisant des fichiers DAO (Data Acess Object) à travers la bibliothèque Morphia. Il s'agit d'un ODM (Object-Document Mapper) léger qui permet de communiquer
            avec la base données à partir de models et d'entités Java.
        </p>
        <br>
        <h4>La base de données</h4>
        <p>
            Il s'agit d'un cluster gratuit MongoDB qui stocke les informations dans des collections et sous forme de documents JSON.
        </p>
    </section>

    <section id="Documentation">
        <h3>Documentation</h3>
        <p>Une documentation TypeDoc a été faites pour la partie client. On peut la trouver ici : <a href="docs-client/index.html">Documentation client</a></p>
        <p>Une documentation TypeDoc a été faites pour la partie client. On peut y accéder ici : <a href="docs-backend/index.html">Documentation backend</a></p>
        <p>La couverture de tests a été générée avec le plugin JaCoco. Elle se trouve ici : <a href="couverture-tests/index.html">Couverture de tests JaCoco</a></p>
    </section>

    <section id="Démonstration">
        <h3>Démonstration</h3>
        <video controls>
            <source src="demo.mp4" type="video/mp4">
            Votre navigateur ne supporte pas la balise vidéo HTML5.
        </video>
    </section>
</div>
<footer>
    <p>&copy; 2025 BugBusters. Tous droits réservés.</p>
    <p>DM3 IFT2255 - UdeM</p>
</footer>
</body>
</html>
